[gd_scene load_steps=17 format=2]

[ext_resource path="res://assets/fonts/font-data/font-style.ttf" type="DynamicFontData" id=1]
[ext_resource path="res://assets/fonts/font-data/font-read.ttf" type="DynamicFontData" id=2]
[ext_resource path="res://game/ui/endgame-stats/PostMortem.gd" type="Script" id=3]
[ext_resource path="res://assets/images/intents/random.png" type="Texture" id=4]
[ext_resource path="res://assets/images/artifacts/poisoned_dagger.png" type="Texture" id=5]
[ext_resource path="res://assets/images/ui/book/draw_bag.png" type="Texture" id=6]
[ext_resource path="res://assets/themes/general_theme/general_theme.tres" type="Theme" id=7]
[ext_resource path="res://game/ui/ClickableReagent.tscn" type="PackedScene" id=8]

[sub_resource type="StyleBoxFlat" id=6]
bg_color = Color( 0.6, 0.6, 0.6, 0 )
draw_center = false
border_width_left = 3
border_width_top = 3
border_width_right = 3
border_width_bottom = 3
border_color = Color( 1, 0, 0, 1 )

[sub_resource type="DynamicFont" id=1]
size = 60
use_mipmaps = true
use_filter = true
extra_spacing_top = -10
extra_spacing_bottom = -10
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=2]
size = 25
use_mipmaps = true
use_filter = true
font_data = ExtResource( 2 )

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;

uniform vec4 outline_color : hint_color = vec4(.0, .0, .0, 1.0);

float rand(float x) {
	return fract(sin(x) * 43758.5453);
}

float triangle(float x) {
	return abs(1.0 - mod(abs(x), 2.0)) * 2.0 - 1.0;
}

void fragment() {
	float time = floor(TIME * 6.0) / 16.0;
	vec2 uv = UV;
	vec2 p = uv;
	vec4 base_color = texture(TEXTURE, uv);
	vec4 color = base_color;
	vec4 edges;
	
	p += vec2(triangle(p.y * rand(time) * 2.0) * rand(time * 0.05) * 0.01,
			triangle(p.x * rand(time * 1.7) * 4.0) * rand(time * 0.05) * 0.01);
	p += vec2(rand(p.x * 3.1 + p.y * 8.7) * 0.01,
			rand(p.x * 1.1 + p.y * 6.7) * 0.01);
	edges = vec4(1.2) - (base_color / vec4(texture(TEXTURE, p)));
	color.rgb = vec3(base_color.r);
	color = color / vec4(length(edges));
	color.rbg = vec3(1.0 - max(.0, min(1.0, color.r)));
	color.a = base_color.a * color.r;
	color.rgb *= outline_color.rgb;
	
	
	COLOR = color;
}"
custom_defines = ""

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 3 )
shader_param/outline_color = Color( 0, 0, 0, 1 )

[sub_resource type="DynamicFont" id=5]
size = 25
use_mipmaps = true
use_filter = true
extra_spacing_top = -15
font_data = ExtResource( 1 )

[sub_resource type="StyleBoxFlat" id=7]
bg_color = Color( 0.152941, 0.0431373, 0.0156863, 0.415686 )
corner_radius_top_left = 10
corner_radius_top_right = 10
expand_margin_left = 10.0
expand_margin_right = 10.0
expand_margin_top = 10.0

[sub_resource type="StyleBoxFlat" id=8]
bg_color = Color( 0.152941, 0.0431373, 0.0156863, 0.415686 )
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10
expand_margin_left = 10.0
expand_margin_right = 10.0
expand_margin_top = 10.0
expand_margin_bottom = 10.0

[node name="PostMortem" type="Control"]
anchor_right = 0.328
anchor_bottom = 0.738
margin_right = 0.23999
margin_bottom = -7.03998
rect_min_size = Vector2( 630, 797 )
theme = ExtResource( 7 )
script = ExtResource( 3 )
__meta__ = {
"_edit_use_anchors_": false
}
sketch_color = Color( 0.133333, 0.0470588, 0.0352941, 1 )
poison_texture = ExtResource( 5 )

[node name="MeDeleta" type="Panel" parent="."]
show_behind_parent = true
anchor_right = 1.0
anchor_bottom = 1.0
custom_styles/panel = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Title" type="Label" parent="."]
margin_left = 20.0
margin_right = 557.0
margin_bottom = 76.0
custom_fonts/font = SubResource( 1 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Post-mortem"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Killer" type="VBoxContainer" parent="."]
margin_left = 20.0
margin_top = 100.0
margin_right = 270.0
margin_bottom = 431.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Title" type="Label" parent="Killer"]
margin_right = 250.0
margin_bottom = 33.0
custom_fonts/font = SubResource( 2 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Killed by:"

[node name="Image" type="TextureRect" parent="Killer"]
material = SubResource( 4 )
margin_top = 37.0
margin_right = 250.0
margin_bottom = 287.0
rect_min_size = Vector2( 250, 250 )
texture = ExtResource( 4 )
expand = true
stretch_mode = 6

[node name="Name" type="Label" parent="Killer"]
margin_top = 291.0
margin_right = 250.0
margin_bottom = 331.0
rect_min_size = Vector2( 250, 40 )
custom_fonts/font = SubResource( 5 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Unknown"
align = 1
autowrap = true

[node name="BagIcon" type="TextureRect" parent="."]
margin_left = 20.0
margin_top = 439.0
margin_right = 100.0
margin_bottom = 519.0
texture = ExtResource( 6 )
expand = true
stretch_mode = 6
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Panel" type="Panel" parent="BagIcon"]
show_behind_parent = true
anchor_right = 1.0
anchor_bottom = 1.0
custom_styles/panel = SubResource( 7 )

[node name="Panel" type="Panel" parent="."]
show_behind_parent = true
margin_left = 20.0
margin_top = 530.0
margin_right = 610.0
margin_bottom = 744.0
rect_min_size = Vector2( 590, 247 )
custom_styles/panel = SubResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ScrollContainer" type="ScrollContainer" parent="."]
margin_left = 20.0
margin_top = 530.0
margin_right = 610.0
margin_bottom = 777.0
rect_min_size = Vector2( 590, 247 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ReagentContainer" type="GridContainer" parent="ScrollContainer"]
margin_right = 554.0
margin_bottom = 344.0
custom_constants/vseparation = 6
custom_constants/hseparation = 6
columns = 8

[node name="ClickableReagent" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 64.0
margin_bottom = 64.0

[node name="ClickableReagent2" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 70.0
margin_right = 134.0
margin_bottom = 64.0

[node name="ClickableReagent3" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 140.0
margin_right = 204.0
margin_bottom = 64.0

[node name="ClickableReagent4" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 210.0
margin_right = 274.0
margin_bottom = 64.0

[node name="ClickableReagent5" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 280.0
margin_right = 344.0
margin_bottom = 64.0

[node name="ClickableReagent6" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 350.0
margin_right = 414.0
margin_bottom = 64.0

[node name="ClickableReagent7" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 420.0
margin_right = 484.0
margin_bottom = 64.0

[node name="ClickableReagent8" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 490.0
margin_right = 554.0
margin_bottom = 64.0

[node name="ClickableReagent9" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_top = 70.0
margin_right = 64.0
margin_bottom = 134.0

[node name="ClickableReagent10" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 70.0
margin_top = 70.0
margin_right = 134.0
margin_bottom = 134.0

[node name="ClickableReagent11" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 140.0
margin_top = 70.0
margin_right = 204.0
margin_bottom = 134.0

[node name="ClickableReagent12" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 210.0
margin_top = 70.0
margin_right = 274.0
margin_bottom = 134.0

[node name="ClickableReagent13" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 280.0
margin_top = 70.0
margin_right = 344.0
margin_bottom = 134.0

[node name="ClickableReagent14" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 350.0
margin_top = 70.0
margin_right = 414.0
margin_bottom = 134.0

[node name="ClickableReagent15" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 420.0
margin_top = 70.0
margin_right = 484.0
margin_bottom = 134.0

[node name="ClickableReagent16" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 490.0
margin_top = 70.0
margin_right = 554.0
margin_bottom = 134.0

[node name="ClickableReagent17" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_top = 140.0
margin_right = 64.0
margin_bottom = 204.0

[node name="ClickableReagent18" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 70.0
margin_top = 140.0
margin_right = 134.0
margin_bottom = 204.0

[node name="ClickableReagent19" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 140.0
margin_top = 140.0
margin_right = 204.0
margin_bottom = 204.0

[node name="ClickableReagent20" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 210.0
margin_top = 140.0
margin_right = 274.0
margin_bottom = 204.0

[node name="ClickableReagent21" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 280.0
margin_top = 140.0
margin_right = 344.0
margin_bottom = 204.0

[node name="ClickableReagent22" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 350.0
margin_top = 140.0
margin_right = 414.0
margin_bottom = 204.0

[node name="ClickableReagent23" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 420.0
margin_top = 140.0
margin_right = 484.0
margin_bottom = 204.0

[node name="ClickableReagent24" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 490.0
margin_top = 140.0
margin_right = 554.0
margin_bottom = 204.0

[node name="ClickableReagent25" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_top = 210.0
margin_right = 64.0
margin_bottom = 274.0

[node name="ClickableReagent26" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 70.0
margin_top = 210.0
margin_right = 134.0
margin_bottom = 274.0

[node name="ClickableReagent27" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 140.0
margin_top = 210.0
margin_right = 204.0
margin_bottom = 274.0

[node name="ClickableReagent28" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 210.0
margin_top = 210.0
margin_right = 274.0
margin_bottom = 274.0

[node name="ClickableReagent29" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 280.0
margin_top = 210.0
margin_right = 344.0
margin_bottom = 274.0

[node name="ClickableReagent30" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 350.0
margin_top = 210.0
margin_right = 414.0
margin_bottom = 274.0

[node name="ClickableReagent31" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 420.0
margin_top = 210.0
margin_right = 484.0
margin_bottom = 274.0

[node name="ClickableReagent32" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 490.0
margin_top = 210.0
margin_right = 554.0
margin_bottom = 274.0

[node name="ClickableReagent33" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_top = 280.0
margin_right = 64.0
margin_bottom = 344.0

[node name="ClickableReagent34" parent="ScrollContainer/ReagentContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 70.0
margin_top = 280.0
margin_right = 134.0
margin_bottom = 344.0
